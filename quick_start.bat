@echo off
chcp 65001 >nul
cls

echo ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
echo ‚ïë                                                              ‚ïë
echo ‚ïë       üìä Stock Quotes Analyzer - –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ üìä          ‚ïë
echo ‚ïë                                                              ‚ïë
echo ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
echo.

REM ========== –ü–†–û–í–ï–†–ö–ê –û–ö–†–£–ñ–ï–ù–ò–Ø ==========
echo [1/6] üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è...
if not exist "venv\" (
    echo ‚ùå –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ!
    echo.
    echo –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–∞—á–∞–ª–∞ setup.bat –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
    pause
    exit /b 1
)
echo ‚úÖ –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–æ
echo.

REM ========== –ê–ö–¢–ò–í–ê–¶–ò–Ø –û–ö–†–£–ñ–ï–ù–ò–Ø ==========
echo [2/6] üîß –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è...
call venv\Scripts\activate.bat
if errorlevel 1 (
    echo ‚ùå –û—à–∏–±–∫–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
    pause
    exit /b 1
)
echo ‚úÖ –û–∫—Ä—É–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ
echo.

REM ========== –ü–†–û–í–ï–†–ö–ê –°–¢–†–£–ö–¢–£–†–´ ==========
echo [3/6] üìÅ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞...

set MISSING_FILES=0

if not exist "config.yaml" (
    echo ‚ùå config.yaml –Ω–µ –Ω–∞–π–¥–µ–Ω
    set MISSING_FILES=1
)

if not exist "app.py" (
    echo ‚ùå app.py –Ω–µ –Ω–∞–π–¥–µ–Ω
    set MISSING_FILES=1
)

if not exist "src\data_loader.py" (
    echo ‚ùå src\data_loader.py –Ω–µ –Ω–∞–π–¥–µ–Ω
    set MISSING_FILES=1
)

if not exist "src\llm_manager.py" (
    echo ‚ùå src\llm_manager.py –Ω–µ –Ω–∞–π–¥–µ–Ω
    set MISSING_FILES=1
)

if not exist "src\company_info.py" (
    echo ‚ùå src\company_info.py –Ω–µ –Ω–∞–π–¥–µ–Ω
    set MISSING_FILES=1
)

if not exist "src\database.py" (
    echo ‚ùå src\database.py –Ω–µ –Ω–∞–π–¥–µ–Ω
    set MISSING_FILES=1
)

if not exist "src\analyzer.py" (
    echo ‚ùå src\analyzer.py –Ω–µ –Ω–∞–π–¥–µ–Ω
    set MISSING_FILES=1
)

if not exist "dashboards\overview.py" (
    echo ‚ùå dashboards\overview.py –Ω–µ –Ω–∞–π–¥–µ–Ω
    set MISSING_FILES=1
)

if not exist "dashboards\settings.py" (
    echo ‚ùå dashboards\settings.py –Ω–µ –Ω–∞–π–¥–µ–Ω
    set MISSING_FILES=1
)

if %MISSING_FILES%==1 (
    echo.
    echo ‚ùå –ù–µ –≤—Å–µ —Ñ–∞–π–ª—ã –Ω–∞–π–¥–µ–Ω—ã! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞.
    pause
    exit /b 1
)

echo ‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –Ω–∞–π–¥–µ–Ω—ã
echo.

REM ========== –ü–†–û–í–ï–†–ö–ê API –ö–õ–Æ–ß–ê ==========
echo [4/6] üîë –ü—Ä–æ–≤–µ—Ä–∫–∞ API –∫–ª—é—á–∞...

findstr /C:"your-openrouter-api-key-here" config.yaml >nul
if not errorlevel 1 (
    echo ‚ùå API –∫–ª—é—á –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω!
    echo.
    echo –û—Ç–∫—Ä–æ–π—Ç–µ config.yaml –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ API –∫–ª—é—á:
    echo 1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://openrouter.ai/
    echo 2. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á
    echo 3. –ó–∞–º–µ–Ω–∏—Ç–µ "your-openrouter-api-key-here" –Ω–∞ –≤–∞—à –∫–ª—é—á
    echo 4. –ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å ($10-20 –¥–ª—è –Ω–∞—á–∞–ª–∞)
    echo.
    choice /C YN /M "–•–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –±–µ–∑ API –∫–ª—é—á–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞)"
    if errorlevel 2 exit /b 1
) else (
    echo ‚úÖ API –∫–ª—é—á –Ω–∞—Å—Ç—Ä–æ–µ–Ω
)
echo.

REM ========== –ü–†–û–í–ï–†–ö–ê –ó–ê–í–ò–°–ò–ú–û–°–¢–ï–ô ==========
echo [5/6] üì¶ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π...

python -c "import streamlit" 2>nul
if errorlevel 1 (
    echo ‚ùå Streamlit –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
    echo –ó–∞–ø—É—Å—Ç–∏—Ç–µ: pip install -r requirements.txt
    pause
    exit /b 1
)

python -c "import pandas" 2>nul
if errorlevel 1 (
    echo ‚ùå Pandas –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
    pause
    exit /b 1
)

python -c "import openai" 2>nul
if errorlevel 1 (
    echo ‚ùå OpenAI –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
    pause
    exit /b 1
)

python -c "import plotly" 2>nul
if errorlevel 1 (
    echo ‚ùå Plotly –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
    pause
    exit /b 1
)

python -c "import nest_asyncio" 2>nul
if errorlevel 1 (
    echo ‚ùå nest_asyncio –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
    pause
    exit /b 1
)

echo ‚úÖ –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
echo.

REM ========== –°–û–ó–î–ê–ù–ò–ï –ü–ê–ü–û–ö ==========
if not exist "data\" mkdir data
if not exist "data\cache\" mkdir data\cache
if not exist "logs\" mkdir logs
if not exist "output\" mkdir output
if not exist "output\exports\" mkdir output\exports

REM ========== –ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –ó–ê–ü–£–°–ö–ï ==========
echo [6/6] üöÄ –ó–∞–ø—É—Å–∫ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...
echo.
echo ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
echo ‚ïë                    üí° –ü–û–õ–ï–ó–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø üí°                ‚ïë
echo ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
echo.
echo üåê –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –Ω–∞: http://localhost:8501
echo.
echo üì± –î–ª—è –¥–æ—Å—Ç—É–ø–∞ —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏:
for /f "tokens=2 delims=:" %%a in ('ipconfig ^| findstr /C:"IPv4"') do (
    echo    http://%%a:8501
)
echo.
echo üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
echo    ‚Ä¢ Ctrl+C - –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
echo    ‚Ä¢ –ü—Ä–æ—Å—Ç–æ –∑–∞–∫—Ä–æ–π—Ç–µ —ç—Ç–æ –æ–∫–Ω–æ - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è
echo.
echo üí° –ü–µ—Ä–≤—ã–µ —à–∞–≥–∏:
echo    1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ù–∞—Å—Ç—Ä–æ–π–∫–∏"
echo    2. –î–æ–±–∞–≤—å—Ç–µ –∫–æ–º–ø–∞–Ω–∏–∏ –ø–æ Ticker
echo    3. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞ –≥–ª–∞–≤–Ω—É—é –∏ –Ω–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑"
echo.
echo ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
echo ‚ïë              ‚úÖ –í–°–ï –ü–†–û–í–ï–†–ö–ò –ü–†–û–ô–î–ï–ù–´ ‚úÖ                    ‚ïë
echo ‚ïë           –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã...                         ‚ïë
echo ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
echo.

timeout /t 3 /nobreak >nul

REM ========== –ó–ê–ü–£–°–ö ==========
echo üöÄ –ó–∞–ø—É—Å–∫ Streamlit...
echo.

streamlit run app.py

REM ========== –û–ë–†–ê–ë–û–¢–ö–ê –í–´–•–û–î–ê ==========
if errorlevel 1 (
    echo.
    echo ‚ùå –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–∏–ª–æ—Å—å —Å –æ—à–∏–±–∫–æ–π
    echo.
    echo –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –ø–∞–ø–∫–µ logs/
    echo.
    pause
    exit /b 1
)

echo.
echo ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ
pause
