╔══════════════════════════════════════════════════════════════╗
║                                                              ║
║               ⚠️  ПРЕДУПРЕЖДЕНИЕ БЕЗОПАСНОСТИ ⚠️             ║
║                                                              ║
╚══════════════════════════════════════════════════════════════╝


🔒 ВАЖНО: Защита API ключей

═══════════════════════════════════════════════════════════════

❌ НЕ ДЕЛАЙТЕ ЭТОГО:

1. НЕ коммитьте config.yaml в Git с реальным API ключом
2. НЕ отправляйте config.yaml в публичные репозитории
3. НЕ делитесь файлом config.yaml с другими
4. НЕ сохраняйте ключи в открытом виде


✅ ДЕЛАЙТЕ ТАК:

1. Используйте config.example.yaml как шаблон
2. Реальный config.yaml должен быть в .gitignore
3. Используйте переменные окружения для ключей
4. Для production используйте секреты менеджер


═══════════════════════════════════════════════════════════════


🔐 ПРАВИЛЬНАЯ НАСТРОЙКА:


Вариант 1: Переменные окружения (РЕКОМЕНДУЕТСЯ)
───────────────────────────────────────────────

Windows:
  set OPENROUTER_API_KEY=ваш-ключ
  
  Или постоянно:
  setx OPENROUTER_API_KEY "ваш-ключ"

Linux/Mac:
  export OPENROUTER_API_KEY="ваш-ключ"
  
  Или в ~/.bashrc:
  echo 'export OPENROUTER_API_KEY="ваш-ключ"' >> ~/.bashrc

В config.yaml оставьте пустым:
  api_key: ""


Вариант 2: .env файл
──────────────────────

1. Создайте файл .env:
   OPENROUTER_API_KEY=ваш-ключ
   ALPHAVANTAGE_API_KEY=ваш-ключ

2. Добавьте .env в .gitignore:
   echo ".env" >> .gitignore


Вариант 3: Защищенный config.yaml
───────────────────────────────────

1. Создайте config.yaml из config.example.yaml
2. Добавьте ключи
3. УБЕДИТЕСЬ что config.yaml в .gitignore:
   
   git check-ignore config.yaml
   # Должно вывести: config.yaml


═══════════════════════════════════════════════════════════════


📝 ПРОВЕРКА ПЕРЕД КОММИТОМ:


Выполните перед git push:

  git status
  
  Убедитесь что НЕ видите:
    modified:   config.yaml    ← НЕ ДОЛЖНО БЫТЬ!


Если config.yaml в staged:

  git reset config.yaml
  git update-index --assume-unchanged config.yaml


═══════════════════════════════════════════════════════════════


🔍 ЧТО ДЕЛАТЬ ЕСЛИ КЛЮЧ СКОМПРОМЕТИРОВАН:


Если вы случайно закоммитили API ключ:

1. НЕМЕДЛЕННО отзовите ключ:
   → https://openrouter.ai/keys
   → Удалите скомпрометированный ключ

2. Создайте новый ключ

3. Обновите config.yaml локально

4. Удалите ключ из истории Git:
   git filter-branch --force --index-filter \
   "git rm --cached --ignore-unmatch config.yaml" \
   --prune-empty --tag-name-filter cat -- --all

5. Force push (ОСТОРОЖНО!):
   git push origin --force --all


═══════════════════════════════════════════════════════════════


💰 КОНТРОЛЬ РАСХОДОВ:


1. Установите лимит на OpenRouter:
   → https://openrouter.ai/settings/limits
   → Установите дневной/месячный лимит

2. Мониторьте использование:
   → https://openrouter.ai/activity
   → Проверяйте расходы регулярно

3. Используйте бесплатные альтернативы:
   → Alphavantage API (500 req/день бесплатно)
   → Yahoo Finance (с ограничениями)


═══════════════════════════════════════════════════════════════


🎯 КОНТРОЛЬНЫЙ СПИСОК БЕЗОПАСНОСТИ:


Перед развертыванием на новом сервере:

  [ ] config.yaml НЕ в Git репозитории
  [ ] .gitignore содержит config.yaml
  [ ] config.example.yaml БЕЗ реальных ключей
  [ ] API ключи в переменных окружения ИЛИ .env
  [ ] .env в .gitignore
  [ ] Установлены лимиты на OpenRouter
  [ ] Настроен мониторинг расходов
  [ ] Логи не содержат API ключи
  [ ] База данных не содержит ключи


═══════════════════════════════════════════════════════════════


📚 ДОПОЛНИТЕЛЬНАЯ ИНФОРМАЦИЯ:


Документация:
  - DEPLOYMENT.md - Руководство по развертыванию
  - README.md - Основная документация
  - .gitignore - Список игнорируемых файлов


Полезные ссылки:
  - OpenRouter Keys: https://openrouter.ai/keys
  - OpenRouter Limits: https://openrouter.ai/settings/limits
  - Alphavantage: https://www.alphavantage.co/


═══════════════════════════════════════════════════════════════


⚠️  ЗАПОМНИТЕ:

  API ключ = деньги на вашем счету
  
  Защищайте его как пароль от банковской карты!


═══════════════════════════════════════════════════════════════
